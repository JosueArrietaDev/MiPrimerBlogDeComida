<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <!--tipo de CARACTERES que se usan-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!--"width=device-width" Esto ajusta la pagina a cualquer dispositivo "initial-scale=1.0" zoom inicial al "100%"-->
  <!-- Palabras clave -->
  <meta name="keywords" content="HTML, ejemplo, etiquetas, página web" />
  <!-- Meta para definir el autor de la página -->
  <meta name="author" content="SQUAD 1-Celsius" />
  <!-- Título -->
  <title>El Menú</title>
  <!-- Llama al CSS de la página -->
  <link rel="stylesheet" href="./EstilosComida.css" />
  <!-- Llama al JS de los comentarios -->
  <script src="./js/Comentarios.js" defer></script>
  <!-- Llama al JS de la barra de selección -->
  <script src="./js/BarraDeSeleccion.js" defer></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <!-- favicon -->
  <link rel="icon" type="image/png" href="./Pages/FavIcon/MiBlog.jpg"/>
</head>

<body>
  <!-- Este es el encabezado -->
  <header class="header">
    <!-- Podemos agregar un logo dentro de este header-->
    <nav>
      <a id="inicioLink" href="./Comida.html">INICIO</a>
      <a id="menuLink" href="#">MENÚ</a>
      <a id="quienesSomosLink" href="./Pages/QuienesSomos.html">QUIENES SOMOS</a>
      <a id="contactoLink" href="./Pages/Contacto.html">CONTACTO</a>
    </nav> 
  </header>
  <section>
    <div class="titulo">
      <h1>¡A COMER!</h1>
      <br>
      <!-- Título principal -->
      <p>
        Nuestra selección de las comidas que no se pueden perder si están en
        Mendoza. Mostramos 4 de las mejores comdias.
      </p>
      <br>
      <!-- Contenido principal -->
    </div>
  </section>
  <main>
    <br>
    <h1 class="subtitulos">La gastronomía desde nuestros gustos.</h1>
    <section>
      <!-- Secciones de elementos -->
      <!-- Sección 1 -->
      <br>
      <div class="contenedor">
        <div class="imagen">
          <img src="./images/imagenHamburguesa.jpg" alt="Hamburguesa completa." />
        </div>
        <div class="texto">
          <h2>Hamburguesa</h2>
          <p>
            La hamburguesa es una obra maestra entre dos panes. Una jugosa carne
            de vaca, sazonada a la perfección, acompañada de queso derretido,
            lechuga, tomate y cebolla, todo coronado con una generosa porción de
            salsa chimichurri o criolla.
          </p>
        </div>
        <div>
          <div class="photo-container">
            <button onclick="react('comida1', 'like')">Like</button>
            <button onclick="react('comida1', 'dislike')">Dislike</button>
          </div>
          <span id="reactions-comida1"></span>
        </div>
      </div>
      <!-- Sección 2 -->
      <div class="contenedor">
        <div class="imagen">
          <img src="./images/imagenPizza.jpg" alt="Muzzarela" />
        </div>
        <div class="texto">
          <h2>Pizza</h2>
          <p>
            Las pizzas son pura pasión y sabor. Una base de masa crujiente, con
            una generosa capa de salsa y un montón de queso derretido. Y van
            desde las clásicas mozzarellas, hasta las más exóticas como las tipo
            Tropical.
          </p>
        </div>
        <div>
          <div class="photo-container">
            <button onclick="react('comida1', 'like')">Like</button>
            <button onclick="react('comida1', 'dislike')">Dislike</button>
          </div>
          <span id="reactions-comida2"></span>
        </div>
      </div>
      <!-- Sección 3 -->
      <div class="contenedor">
        <div class="imagen">
          <img src="./images/imagenPanchos.jpg" alt="Pancho completo" />
        </div>
        <div class="texto">
          <h2>Panchos</h2>
          <p>
            El pancho es un clásico que nunca falla. Es una salchicha jugosa
            envuelta en un suave pancito, acompañada de una explosión de sabores
            que van desde la salsa golf hasta el chimichurri, pasando por la
            mayonesa, el ketchup y la mostaza, y cerrándolo con una lluvia de
            papas.
          </p>
        </div>
        <div>
          <div class="photo-container">
            <button onclick="react('comida1', 'like')">Like</button>
            <button onclick="react('comida1', 'dislike')">Dislike</button>
          </div>
          <span id="reactions-comida1"></span>
        </div>
      </div>
      <!-- Sección 4 -->
      <div class="contenedor">
        <div class="imagen">
          <img src="./images/imagenEmpanada.jpg" alt="Empanadas de carne" />
        </div>
        <div class="texto">
          <h2>Empanadas</h2>
          <p>
            ¿Has probado las auténticas empanadas de Mendoza? Descubre una
            explosión de sabor con nuestro relleno jugoso y auténtico. ¡Ven y
            disfruta de una experiencia gastronómica única! Te esperamos en
            nuestro local con los sabores más deliciosos. ¡No te lo pierdas!
          </p>
        </div>
        <div class="photo-container">
          <div class="reaction-buttons">
            <button onclick="react('comida1', 'like')">Like</button>
           <button onclick="react('comida1', 'dislike')">Dislike</button>
          </div>
          <span id="reactions-comida1"></span>
        </div>
      </div>
    </section>
  </main>
  <br>
  <div id="comentarios">
    <h5>Comentarios</h5>
    <ul id="listaComentarios">
      <!-- Acá se van a mostrar los comentarios -->
    </ul>
    <form id="formularioComentario">
      <!-- Agregamos un nuevo input para el nombre de usuario -->
      <input type="text" id="username" placeholder="Tu nombre" />
      <input type="text" id="inputComentario" placeholder="Escribí tu comentario" />
      <button type="submit">Comentar</button>
    </form>
  </div>
  <br>
  <br>
  <script>
    // Obtener todos los elementos con la clase 'reacciones'
    var reacciones = document.querySelectorAll('.reacciones');
    
    // Iterar sobre cada elemento y agregar la funcionalidad
    reacciones.forEach(function(reaccion) {
      // Obtener elementos "hijos" por decirlo de una forma
      var likeBtn = reaccion.querySelector('.like');
      var dislikeBtn = reaccion.querySelector('.dislike');
      var contador = reaccion.querySelector('.contador');
    
      // Agregar evento de clic al botón de "like"
      likeBtn.addEventListener('click', function() {
        // Incrementar el contador en 1
        contador.textContent = parseInt(contador.textContent) + 1;
      });
    
      // Agregar evento de clic al botón de "dislike"
      dislikeBtn.addEventListener('click', function() {
        // Decrementar el contador en 1, evitando que sea menor que cero
        contador.textContent = Math.max(parseInt(contador.textContent) - 1, 0);
      });
    });

    function react(photoId, action) {
      fetch(`/api/reactions/${photoId}`, {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json',
          },
          body: JSON.stringify({ action }),
      })
      .then(response => response.json())
      .then(() => updateReactions(photoId))
      .catch(error => console.error('Error:', error));
    }

    function updateReactions(photoId) {
      fetch(`/api/reactions/${photoId}`)
      .then(response => response.json())
      .then(data => {
          document.getElementById(`reactions-${photoId}`).textContent = 
              `Likes: ${data.likes}, Dislikes: ${data.dislikes}`;
      })
      .catch(error => console.error('Error:', error));
    }

    // Actualizar reacciones al cargar la página
    document.addEventListener('DOMContentLoaded', () => {
     updateReactions('comida1');
    });
    
  </script>

  <footer id="footer">
    <p>&copy; "pie de página" 2024 Grupo 1.</p>
  </footer>
</body>
